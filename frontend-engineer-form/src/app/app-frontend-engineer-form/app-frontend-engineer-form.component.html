<form [formGroup]="form" (ngSubmit)="submit()">
  <label>
    First Name:
    <input type="text" formControlName="firstName">
  </label>
  <div *ngIf="form.get('firstName')?.invalid && form.get('firstName')?.touched">
    First name is required
  </div>
  <label>
    Last Name:
    <input type="text" formControlName="lastName">
  </label>
  <div *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched">
    Last name is required
  </div>
  <label>
    Date of Birth:
    <input type="date" formControlName="dateOfBirth">
  </label>
  <div *ngIf="form.get('dateOfBirth')?.invalid && form.get('dateOfBirth')?.touched">
    Date of birth is required
  </div>
  <label>
    Framework:
    <select formControlName="framework">
      <option value="">-- choose --</option>
      <option *ngFor="let fw of frameworks" [value]="fw">{{ fw }}</option>
    </select>
  </label>
  <div *ngIf="form.get('framework')?.invalid && form.get('framework')?.touched">
    Framework is required
  </div>
  <label>
    Framework Version:
    <select formControlName="frameworkVersion">
      <option value="">-- choose version --</option>
      <option *ngFor="let version of frameworkVersions[form.get('framework')?.value] || []"
              [value]="version">{{ version }}</option>
    </select>
  </label>
  <div *ngIf="form.get('frameworkVersion')?.invalid && form.get('frameworkVersion')?.touched">
    Framework version is required
  </div>
  <label>
    Email:
    <input type="email" formControlName="email">
  </label>
  <div *ngIf="form.get('email')?.hasError('required') && form.get('email')?.touched">
    Email is required
  </div>
  <div *ngIf="form.get('email')?.hasError('email') && form.get('email')?.touched">
    Invalid email
  </div>
  <div *ngIf="form.get('email')?.hasError('emailExists')">
    Email already exists
  </div>
  <div formArrayName="hobbies">
    <div *ngFor="let hobby of hobbies.controls; let i = index" [formGroupName]="i">
      <label>
        Hobby Name:
        <input type="text" formControlName="name">
      </label>
      <label>
        Duration:
        <input type="text" formControlName="duration">
      </label>
      <button type="button" (click)="removeHobby(i)">Remove</button>
    </div>
  </div>
  <button type="button" (click)="addHobby()">Add Hobby</button>
  <div *ngIf="form.get('hobbies')?.hasError('minHobbies') && form.get('hobbies')?.touched">
     At least one hobby is required
  </div>
  <button type="submit" [disabled]="form.invalid">Submit</button>
</form>
